<!DOCTYPE html>
<html lang="zh">
<head>
    <title>球会落何处</title>
    <link rel="shortcut icon" href="/static/favicon.ico">
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/static/css/detail.css">
    <link rel="stylesheet" href="/static/css/github.css">
    <style>
        body {
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
        .container-fluid {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }
        main {
            flex-grow: 1;
        }
        .code-pre {
             white-space: pre-wrap;
             word-wrap: break-word;
        }
    </style>
</head>
<body>
    <div class="container-fluid mt-3">
        <header class="d-flex flex-column flex-md-row justify-content-md-between align-items-md-center mb-3">
            <a href="/problems" class="btn btn-secondary mb-2 mb-md-0">返回题目列表</a>
            <div class="text-md-end">
                <strong class="me-md-3 d-block d-md-inline mb-2 mb-md-0">球会落何处</strong>
                标签:
                
                    <a href="/problems?tag=array" class="badge bg-secondary tag-link">数组</a>
                
                    <a href="/problems?tag=matrix" class="badge bg-secondary tag-link">矩阵</a>
                
                    <a href="/problems?tag=simulation" class="badge bg-secondary tag-link">模拟</a>
                
                &nbsp;&nbsp;
                难度: <span class="badge bg-secondary">Medium</span>
            </div>
        </header>

        <main>
            <section class="mb-4">
                <h2>Submission</h2>
                <div class="code-block">
                    <pre class="bg-light p-2 code-pre"><code class="language-python">class Solution:
    def findBall(self, grid: List[List[int]]) -&gt; List[int]:
        
        m, n = len(grid), len(grid[0])
        answer = [-1] * n

        for col in range(n):
            curr_col = col
            for row in range(m):
                dir = grid[row][curr_col]
                next_col = curr_col + dir
                # Check if the ball is out of bounds or hits a &#39;V&#39; shaped pattern
                if next_col &lt; 0 or next_col &gt;= n or grid[row][next_col] != dir:
                    curr_col = -1
                    break
                curr_col = next_col
            if curr_col != -1:
                answer[col] = curr_col

        return answer</code></pre>
                    <button class="btn btn-sm btn-secondary copy-btn" onclick="copyCode(this)">复制代码</button>
                    <p class="mt-2 mb-0">运行时间: 38 ms</p>
                    <p class="mb-0">内存: 16.5 MB</p>
                </div>
            </section>

            
                <section>
                    <h2>Explain</h2>
                    <div>
                        <p>The solution simulates the path of each ball from the top of the grid to the bottom or until it gets stuck. For each ball, it starts at the top of a column and moves downwards. At each step, based on the direction of the current grid cell (either 1 for right or -1 for left), it tries to move to the adjacent column in that direction. If the ball attempts to move outside the grid bounds or into a cell whose direction forms a &#39;V&#39; shape with the current cell&#39;s direction (i.e., the directions are opposite), the ball gets stuck, and the loop for that ball breaks. If a ball reaches the bottom without getting stuck, its final column position is recorded in the answer array. Otherwise, the position remains -1 indicating the ball got stuck.</p>
                        <p>时间复杂度: O(m * n)</p>
                        <p>空间复杂度: O(n)</p>
                        
                             <pre class="bg-light p-2 code-pre"><code class="language-python">class Solution:
    def findBall(self, grid: List[List[int]]) -&gt; List[int]:
        m, n = len(grid), len(grid[0])  # Get the dimensions of the grid
        answer = [-1] * n  # Initialize the answer array with -1

        for col in range(n):  # Iterate over each ball
            curr_col = col  # Start position for the current ball
            for row in range(m):  # Simulate the ball movement row by row
                dir = grid[row][curr_col]  # Direction of the current cell
                next_col = curr_col + dir  # Calculate the next column based on direction
                # Check if the ball is out of bounds or hits a &#39;V&#39; shaped pattern
                if next_col &lt; 0 or next_col &gt;= n or grid[row][next_col] != dir:
                    curr_col = -1  # Mark the ball as stuck
                    break  # Exit the loop as the ball is stuck
                curr_col = next_col  # Move the ball to the next column
            if curr_col != -1:
                answer[col] = curr_col  # Record the exit column if the ball is not stuck

        return answer  # Return the final results</code></pre>
                        
                    </div>
                </section>
            
        </main>
    </div>
    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/bootstrap.bundle.min.js"></script>
    <script src="/static/js/highlight.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const copyButtons = document.querySelectorAll('.copy-btn');
            copyButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    copyCode(this);
                });
            });
            hljs.highlightAll();
        });

        function copyCode(button) {
            const codeBlock = button.previousElementSibling;
            const code = codeBlock.textContent;
            navigator.clipboard.writeText(code).then(function() {
                button.textContent = '已复制';
                setTimeout(function() {
                    button.textContent = '复制代码';
                }, 2000);
            }, function(err) {
                console.error('无法复制代码: ', err);
            });
        }
    </script>
</body>
</html>