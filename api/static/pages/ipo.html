<!DOCTYPE html>
<html lang="zh">
<head>
    <title>IPO</title>
    <link rel="shortcut icon" href="/static/favicon.ico">
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.bootcdn.net/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/static/css/detail.css">
    <link rel="stylesheet" href="/static/css/github.css">
    <style>
        body {
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
        .container-fluid {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }
        main {
            flex-grow: 1;
        }
        .code-pre {
             white-space: pre-wrap;
             word-wrap: break-word;
        }
    </style>
</head>
<body>
    <div class="container-fluid mt-3">
        <header class="d-flex flex-column flex-md-row justify-content-md-between align-items-md-center mb-3">
            <a href="/problems" class="btn btn-secondary mb-2 mb-md-0">返回题目列表</a>
            <div class="text-md-end">
                <strong class="me-md-3 d-block d-md-inline mb-2 mb-md-0">IPO</strong>
                标签:
                
                    <a href="/problems?tag=greedy" class="badge bg-secondary tag-link">贪心</a>
                
                    <a href="/problems?tag=array" class="badge bg-secondary tag-link">数组</a>
                
                    <a href="/problems?tag=sorting" class="badge bg-secondary tag-link">排序</a>
                
                    <a href="/problems?tag=heap-priority-queue" class="badge bg-secondary tag-link">堆（优先队列）</a>
                
                &nbsp;&nbsp;
                难度: <span class="badge bg-secondary">Hard</span>
            </div>
        </header>

        <main>
            <section class="mb-4">
                <h2>Submission</h2>
                <div class="code-block">
                    <pre class="bg-light p-2 code-pre"><code class="language-python">import heapq
class Solution:
    def findMaximizedCapital(
        self, k: int, w: int, profits: List[int], capital: List[int]
    ) -&gt; int:
        if w &gt;= max(capital):
            return w+sum(sorted(profits)[-k:])
        n=len(profits)
        current=0
        items=list(zip(capital,profits))
        items.sort(key=lambda x:x[0])
        heap=[]
        for _ in range(k):
            while current &lt; n and items[current][0] &lt;= w:
                heapq.heappush(heap,-items[current][1])
                current+=1
            if not heap:
                break
            w-=heapq.heappop(heap)
        return w
</code></pre>
                    <button class="btn btn-sm btn-secondary copy-btn" onclick="copyCode(this)">复制代码</button>
                    <p class="mt-2 mb-0">运行时间: 70 ms</p>
                    <p class="mb-0">内存: 36.9 MB</p>
                </div>
            </section>

            
                <section>
                    <h2>Explain</h2>
                    <div>
                        <p>This solution uses a greedy algorithm combined with a priority queue (heap) to efficiently select projects that maximize capital. Initially, it checks if the starting capital &#39;w&#39; is greater than or equal to the highest capital requirement among the projects. If this is the case, it sorts the profits in descending order and picks the top &#39;k&#39; to get the maximum profit immediately. Otherwise, it pairs each project with its capital and profit, sorts these pairs based on capital, and then uses a max-heap to keep track of the most profitable projects that can be started with the current capital. In each iteration (up to &#39;k&#39; times), it pushes all feasible projects (based on current capital) into the heap and then selects the project with the highest profit. The profit of the selected project is added to the capital, and this process repeats until &#39;k&#39; projects are completed or no further projects can be initiated.</p>
                        <p>时间复杂度: O(n log n)</p>
                        <p>空间复杂度: O(n)</p>
                        
                             <pre class="bg-light p-2 code-pre"><code class="language-python">import heapq
class Solution:
    def findMaximizedCapital(self, k: int, w: int, profits: List[int], capital: List[int]) -&gt; int:
        if w &gt;= max(capital):
            # If initial capital is greater than all project requirements, sort and pick the top k profitable projects
            return w + sum(sorted(profits)[-k:])
        n = len(profits)
        current = 0
        items = list(zip(capital, profits))
        items.sort(key=lambda x: x[0])  # Sort projects by capital requirement
        heap = []
        for _ in range(k):
            while current &lt; n and items[current][0] &lt;= w: # Push feasible projects to max-heap
                heapq.heappush(heap, -items[current][1]) # Use negative to simulate a max-heap using min-heap
                current += 1
            if not heap:
                break
            w -= heapq.heappop(heap)  # Pop the project with the max profit
        return w</code></pre>
                        
                    </div>
                </section>
            
        </main>
    </div>
    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/bootstrap.bundle.min.js"></script>
    <script src="/static/js/highlight.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const copyButtons = document.querySelectorAll('.copy-btn');
            copyButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    copyCode(this);
                });
            });
            hljs.highlightAll();
        });

        function copyCode(button) {
            const codeBlock = button.previousElementSibling;
            const code = codeBlock.textContent;
            navigator.clipboard.writeText(code).then(function() {
                button.textContent = '已复制';
                setTimeout(function() {
                    button.textContent = '复制代码';
                }, 2000);
            }, function(err) {
                console.error('无法复制代码: ', err);
            });
        }
    </script>
</body>
</html>