<!DOCTYPE html>
<html lang="zh">
<head>
    <title>设计链表</title>
    <link rel="shortcut icon" href="/static/favicon.ico">
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.bootcdn.net/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/static/css/detail.css">
    <link rel="stylesheet" href="/static/css/github.css">
    <style>
        body {
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
        .container-fluid {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }
        main {
            flex-grow: 1;
        }
        .code-pre {
             white-space: pre-wrap;
             word-wrap: break-word;
        }
    </style>
</head>
<body>
    <div class="container-fluid mt-3">
        <header class="d-flex flex-column flex-md-row justify-content-md-between align-items-md-center mb-3">
            <a href="/problems" class="btn btn-secondary mb-2 mb-md-0">返回题目列表</a>
            <div class="text-md-end">
                <strong class="me-md-3 d-block d-md-inline mb-2 mb-md-0">设计链表</strong>
                标签:
                
                    <a href="/problems?tag=design" class="badge bg-secondary tag-link">设计</a>
                
                    <a href="/problems?tag=linked-list" class="badge bg-secondary tag-link">链表</a>
                
                &nbsp;&nbsp;
                难度: <span class="badge bg-secondary">Medium</span>
            </div>
        </header>

        <main>
            <section class="mb-4">
                <h2>Submission</h2>
                <div class="code-block">
                    <pre class="bg-light p-2 code-pre"><code class="language-python">class ListNode:

    def __init__(self, val=0, next=None):
        self.val = val
        self.next = next


class MyLinkedList:

    def __init__(self):
        &#34;&#34;&#34;
        Initialize your data structure here.
        &#34;&#34;&#34;
        self.dummy = ListNode()
        self.size = 0


    def get(self, index: int) -&gt; int:
        &#34;&#34;&#34;
        Get the value of the index-th node in the linked list. If the index is invalid, return -1.
        &#34;&#34;&#34;
        if index &gt;= self.size or index &lt; 0:
            return -1

        p = self.dummy
        for _ in range(index+1):
            p = p.next
        return p.val


    def addAtHead(self, val: int) -&gt; None:
        &#34;&#34;&#34;
        Add a node of value val before the first element of the linked list. After the insertion, the new node will be the first node of the linked list.
        &#34;&#34;&#34;
        self.addAtIndex(0, val)

    def addAtTail(self, val: int) -&gt; None:
        &#34;&#34;&#34;
        Append a node of value val to the last element of the linked list.
        &#34;&#34;&#34;
        self.addAtIndex(self.size, val)

    def addAtIndex(self, index: int, val: int) -&gt; None:
        &#34;&#34;&#34;
        Add a node of value val before the index-th node in the linked list. If index equals to the length of linked list, the node will be appended to the end of linked list. If index is greater than the length, the node will not be inserted.
        &#34;&#34;&#34;
        if index &gt; self.size:
            return

        if index &lt; 0:
            index = 0

        pre = self.dummy
        for _ in range(index):
            pre = pre.next

        node = ListNode(val)
        tmp = pre.next
        pre.next = node
        node.next = tmp
        self.size += 1

    def deleteAtIndex(self, index: int) -&gt; None:
        &#34;&#34;&#34;
        Delete the index-th node in the linked list, if the index is valid.
        &#34;&#34;&#34;
        if index &gt;= self.size or index &lt; 0:
            return

        p = self.dummy
        for _ in range(index):
            p = p.next

        p.next = p.next.next
        self.size -= 1

# Your MyLinkedList object will be instantiated and called as such:
# obj = MyLinkedList()
# param_1 = obj.get(index)
# obj.addAtHead(val)
# obj.addAtTail(val)
# obj.addAtIndex(index,val)
# obj.deleteAtIndex(index)
</code></pre>
                    <button class="btn btn-sm btn-secondary copy-btn" onclick="copyCode(this)">复制代码</button>
                    <p class="mt-2 mb-0">运行时间: 208 ms</p>
                    <p class="mb-0">内存: 15.8 MB</p>
                </div>
            </section>

            
                <section>
                    <h2>Explain</h2>
                    <div>
                        <p>此题解实现了一个基本的单链表结构。类 ListNode 定义了链表的节点，包含节点值和指向下一个节点的指针。MyLinkedList 类则提供了链表的各种操作。初始化时创建一个虚拟头节点（dummy node）来简化边界条件处理。增加、删除和获取节点时都是通过遍历到目标位置来完成相应的操作。addAtHead 和 addAtTail 是特殊情况的 addAtIndex，分别在头部和尾部插入节点。</p>
                        <p>时间复杂度: O(n)</p>
                        <p>空间复杂度: O(n)</p>
                        
                             <pre class="bg-light p-2 code-pre"><code class="language-python">class ListNode:

    def __init__(self, val=0, next=None):
        self.val = val  # 节点存储的数据
        self.next = next  # 指向下一个节点的指针


class MyLinkedList:

    def __init__(self):
        \&#34;\&#34;\&#34;
        Initialize your data structure here.
        \&#34;\&#34;\&#34;
        self.dummy = ListNode()  # 初始化一个虚拟头节点，简化边界处理
        self.size = 0  # 链表的当前大小


    def get(self, index: int) -&gt; int:
        \&#34;\&#34;\&#34;
        Get the value of the index-th node in the linked list. If the index is invalid, return -1.
        \&#34;\&#34;\&#34;
        if index &gt;= self.size or index &lt; 0:
            return -1  # 索引无效时返回-1

        p = self.dummy
        for _ in range(index+1):
            p = p.next  # 遍历到目标节点
        return p.val  # 返回节点值


    def addAtHead(self, val: int) -&gt; None:
        \&#34;\&#34;\&#34;
        Add a node of value val before the first element of the linked list. After the insertion, the new node will be the first node of the linked list.
        \&#34;\&#34;\&#34;
        self.addAtIndex(0, val)  # 在头部插入等同于在索引0处插入

    def addAtTail(self, val: int) -&gt; None:
        \&#34;\&#34;\&#34;
        Append a node of value val to the last element of the linked list.
        \&#34;\&#34;\&#34;
        self.addAtIndex(self.size, val)  # 在尾部插入等同于在当前大小处插入

    def addAtIndex(self, index: int, val: int) -&gt; None:
        \&#34;\&#34;\&#34;
        Add a node of value val before the index-th node in the linked list. If index equals to the length of linked list, the node will be appended to the end of linked list. If index is greater than the length, the node will not be inserted.
        \&#34;\&#34;\&#34;
        if index &gt; self.size:
            return  # 索引大于链表长度，不进行插入

        if index &lt; 0:
            index = 0  # 负索引处理为0

        pre = self.dummy
        for _ in range(index):
            pre = pre.next  # 找到插入点的前一个位置

        node = ListNode(val)
        tmp = pre.next
        pre.next = node
        node.next = tmp  # 插入新节点
        self.size += 1  # 更新链表大小

    def deleteAtIndex(self, index: int) -&gt; None:
        \&#34;\&#34;\&#34;
        Delete the index-th node in the linked list, if the index is valid.
        \&#34;\&#34;\&#34;
        if index &gt;= self.size or index &lt; 0:
            return  # 索引无效，不进行删除

        p = self.dummy
        for _ in range(index):
            p = p.next  # 找到需要删除的节点的前一个节点

        p.next = p.next.next  # 删除节点
        self.size -= 1  # 更新链表大小

# Your MyLinkedList object will be instantiated and called as such:
# obj = MyLinkedList()
# param_1 = obj.get(index)
# obj.addAtHead(val)
# obj.addAtTail(val)
# obj.addAtIndex(index,val)
# obj.deleteAtIndex(index)
</code></pre>
                        
                    </div>
                </section>
            
        </main>
    </div>
    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/bootstrap.bundle.min.js"></script>
    <script src="/static/js/highlight.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const copyButtons = document.querySelectorAll('.copy-btn');
            copyButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    copyCode(this);
                });
            });
            hljs.highlightAll();
        });

        function copyCode(button) {
            const codeBlock = button.previousElementSibling;
            const code = codeBlock.textContent;
            navigator.clipboard.writeText(code).then(function() {
                button.textContent = '已复制';
                setTimeout(function() {
                    button.textContent = '复制代码';
                }, 2000);
            }, function(err) {
                console.error('无法复制代码: ', err);
            });
        }
    </script>
</body>
</html>