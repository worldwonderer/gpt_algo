<!DOCTYPE html>
<html lang="zh">
<head>
    <title>适龄的朋友</title>
    <link rel="shortcut icon" href="/static/favicon.ico">
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.bootcdn.net/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/static/css/detail.css">
    <link rel="stylesheet" href="/static/css/github.css">
    <style>
        body {
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
        .container-fluid {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }
        main {
            flex-grow: 1;
        }
        .code-pre {
             white-space: pre-wrap;
             word-wrap: break-word;
        }
    </style>
</head>
<body>
    <div class="container-fluid mt-3">
        <header class="d-flex flex-column flex-md-row justify-content-md-between align-items-md-center mb-3">
            <a href="/problems" class="btn btn-secondary mb-2 mb-md-0">返回题目列表</a>
            <div class="text-md-end">
                <strong class="me-md-3 d-block d-md-inline mb-2 mb-md-0">适龄的朋友</strong>
                标签:
                
                    <a href="/problems?tag=array" class="badge bg-secondary tag-link">数组</a>
                
                    <a href="/problems?tag=two-pointers" class="badge bg-secondary tag-link">双指针</a>
                
                    <a href="/problems?tag=binary-search" class="badge bg-secondary tag-link">二分查找</a>
                
                    <a href="/problems?tag=sorting" class="badge bg-secondary tag-link">排序</a>
                
                &nbsp;&nbsp;
                难度: <span class="badge bg-secondary">Medium</span>
            </div>
        </header>

        <main>
            <section class="mb-4">
                <h2>Submission</h2>
                <div class="code-block">
                    <pre class="bg-light p-2 code-pre"><code class="language-python">class Solution:
    def numFriendRequests(self, ages: List[int]) -&gt; int:
        # age[y] &lt;= 0.5 * age[x] + 7                age[y] &gt; 0.5 * age[x] + 7
        # age[y] &gt; age[x]                           age[y] &lt;= age[x] # the last age[y] &lt;= age[x]
        # age[y] &gt; 100 &amp;&amp; age[x] &lt; 100
        # ages.sort()
        # res = 0
        # n = len(ages)

        # def binary_search_larger_than(val, left, right):
        #     if not (-1 &lt; left &lt; n and -1 &lt; right &lt; n):
        #         return -1
        #     l, r = left, right
        #     while l + 1 &lt; r:
        #         m = l + (r - l) // 2
        #         if ages[m] &lt; val:
        #             l = m
        #         elif ages[m] == val:
        #             l = m
        #         else:
        #             r = m
        #     if ages[l] &gt; val:
        #         return l
        #     if ages[r] &gt; val:
        #         return r
        #     return -1
        
        # def binary_search_less_equal(val, left, right):
        #     if not (-1 &lt; left &lt; n and -1 &lt; right &lt; n):
        #         return -1
        #     l, r = left, right
        #     while l + 1 &lt; r:
        #         m = l + (r - l) // 2
        #         if ages[m] &lt; val:
        #             l = m
        #         elif ages[m] == val:
        #             l = m
        #         else:
        #             r = m
        #     if ages[r] &lt;= val:
        #         return r
        #     if ages[l] &lt;= val:
        #         return l
        #     return -1

        # for i, age in enumerate(ages):
        #     val = int(0.5 * age) + 7
        #     lower = binary_search_larger_than(val, 0, i)
        #     upper = binary_search_less_equal(age, i, n - 1)
        #     if lower != -1 and upper != -1:
        #         res += upper - lower # not include themself
        
        # return res

        res = 0
        ages_count = [0] * 121
        for age in ages:
            ages_count[age] += 1

        pref_sum = [0] * 121
        for i in range(1, 121):
            pref_sum[i] = pref_sum[i - 1] + ages_count[i]
        
        # for i in ages:
        for i in range(1, 121):
            if ages_count[i] == 0: continue
            val = int(0.5 * i) + 7
            # for age in range(val + 1, i + 1):
            #     if ages_count[age] &gt; 0:
            #         res += ages_count[age]
            #     if age == i:
            #         res -= 1
            if i &gt; val:
                res += (pref_sum[i] - pref_sum[val] - 1) * ages_count[i] 
        return res</code></pre>
                    <button class="btn btn-sm btn-secondary copy-btn" onclick="copyCode(this)">复制代码</button>
                    <p class="mt-2 mb-0">运行时间: 40 ms</p>
                    <p class="mb-0">内存: 16.8 MB</p>
                </div>
            </section>

            
                <section>
                    <h2>Explain</h2>
                    <div>
                        <p>This solution utilizes a frequency array to count the occurrences of each age from 1 to 120. It creates a prefix sum array to quickly calculate the sum of frequencies up to any given age. The logic involves iterating over each age and determining the range of ages that can receive friend requests from that age based on the given conditions. For each valid age, the solution calculates the number of potential friend requests by multiplying the frequency of the current age by the number of users in the valid age range (using the prefix sum to find this number quickly). This method avoids the need for nested iterations over the `ages` array, thus improving efficiency.</p>
                        <p>时间复杂度: O(n)</p>
                        <p>空间复杂度: O(1)</p>
                        
                             <pre class="bg-light p-2 code-pre"><code class="language-python"># Class definition for the solution
class Solution:
    def numFriendRequests(self, ages: List[int]) -&gt; int:
        # Initialize result and frequency array for ages
        res = 0
        ages_count = [0] * 121

        # Count frequency of each age
        for age in ages:
            ages_count[age] += 1

        # Create prefix sum array for cumulative age counts
        pref_sum = [0] * 121
        for i in range(1, 121):
            pref_sum[i] = pref_sum[i - 1] + ages_count[i]

        # Calculate friend requests for each age
        for i in range(1, 121):
            if ages_count[i] == 0: continue
            val = int(0.5 * i) + 7
            if i &gt; val:
                res += (pref_sum[i] - pref_sum[val] - 1) * ages_count[i] 
        return res</code></pre>
                        
                    </div>
                </section>
            
        </main>
    </div>
    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/bootstrap.bundle.min.js"></script>
    <script src="/static/js/highlight.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const copyButtons = document.querySelectorAll('.copy-btn');
            copyButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    copyCode(this);
                });
            });
            hljs.highlightAll();
        });

        function copyCode(button) {
            const codeBlock = button.previousElementSibling;
            const code = codeBlock.textContent;
            navigator.clipboard.writeText(code).then(function() {
                button.textContent = '已复制';
                setTimeout(function() {
                    button.textContent = '复制代码';
                }, 2000);
            }, function(err) {
                console.error('无法复制代码: ', err);
            });
        }
    </script>
</body>
</html>