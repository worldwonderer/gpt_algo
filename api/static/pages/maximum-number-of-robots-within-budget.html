<!DOCTYPE html>
<html lang="zh">
<head>
    <title>预算内的最多机器人数目</title>
    <link rel="shortcut icon" href="/static/favicon.ico">
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/static/css/detail.css">
    <link rel="stylesheet" href="/static/css/github.css">
    <style>
        body {
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
        .container-fluid {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }
        main {
            flex-grow: 1;
        }
        .code-pre {
             white-space: pre-wrap;
             word-wrap: break-word;
        }
    </style>
</head>
<body>
    <div class="container-fluid mt-3">
        <header class="d-flex flex-column flex-md-row justify-content-md-between align-items-md-center mb-3">
            <a href="/problems" class="btn btn-secondary mb-2 mb-md-0">返回题目列表</a>
            <div class="text-md-end">
                <strong class="me-md-3 d-block d-md-inline mb-2 mb-md-0">预算内的最多机器人数目</strong>
                标签:
                
                    <a href="/problems?tag=queue" class="badge bg-secondary tag-link">队列</a>
                
                    <a href="/problems?tag=array" class="badge bg-secondary tag-link">数组</a>
                
                    <a href="/problems?tag=binary-search" class="badge bg-secondary tag-link">二分查找</a>
                
                    <a href="/problems?tag=prefix-sum" class="badge bg-secondary tag-link">前缀和</a>
                
                    <a href="/problems?tag=sliding-window" class="badge bg-secondary tag-link">滑动窗口</a>
                
                    <a href="/problems?tag=heap-priority-queue" class="badge bg-secondary tag-link">堆（优先队列）</a>
                
                &nbsp;&nbsp;
                难度: <span class="badge bg-secondary">Hard</span>
            </div>
        </header>

        <main>
            <section class="mb-4">
                <h2>Submission</h2>
                <div class="code-block">
                    <pre class="bg-light p-2 code-pre"><code class="language-python">class Solution:
    def maximumRobots(self, chargeTimes: List[int], runningCosts: List[int], budget: int) -&gt; int:
        n = len(chargeTimes)
        left = 0
        dq, costs = deque(), 0
        ans = 0
        for right in range(n):
            while dq and chargeTimes[right] &gt; dq[-1]:
                dq.pop()
            dq.append(chargeTimes[right])
            costs += runningCosts[right]
            if dq[0] + (right - left + 1) * costs &lt;= budget:
                ans = right - left + 1
            else:
                if dq[0] == chargeTimes[left]:
                    dq.popleft()
                costs -= runningCosts[left]
                left += 1
        return ans



</code></pre>
                    <button class="btn btn-sm btn-secondary copy-btn" onclick="copyCode(this)">复制代码</button>
                    <p class="mt-2 mb-0">运行时间: 166 ms</p>
                    <p class="mb-0">内存: 21.9 MB</p>
                </div>
            </section>

            
                <section>
                    <h2>Explain</h2>
                    <div>
                        <p>The solution uses a sliding window approach combined with a deque to maintain the maximum charge time within the current window. As we iterate through the robots using a right pointer, we add the current robot&#39;s charge time to the deque in a way that ensures the deque is always sorted in descending order. This allows the largest element (maximum charge time) to always be at the front of the deque. We also keep a running sum of the running costs. At each step, we check if the sum of the maximum charge time and the product of the number of robots and the sum of running costs fits within the budget. If it does, we update our answer. If it doesn&#39;t, we adjust the window by moving the left pointer to the right, ensuring the properties of the deque and updating the running costs sum accordingly.</p>
                        <p>时间复杂度: O(n)</p>
                        <p>空间复杂度: O(n)</p>
                        
                             <pre class="bg-light p-2 code-pre"><code class="language-python">class Solution:
    def maximumRobots(self, chargeTimes: List[int], runningCosts: List[int], budget: int) -&gt; int:
        n = len(chargeTimes)
        left = 0
        dq, costs = deque(), 0
        ans = 0
        for right in range(n):
            # Maintain a decreasing deque of charge times
            while dq and chargeTimes[right] &gt; dq[-1]:
                dq.pop()
            dq.append(chargeTimes[right])
            # Update the total running costs for the current window
            costs += runningCosts[right]
            # Check if the current window fits the budget
            if dq[0] + (right - left + 1) * costs &lt;= budget:
                ans = max(ans, right - left + 1)
            else:
                # Adjust the window from the left if budget is exceeded
                if dq[0] == chargeTimes[left]:
                    dq.popleft()
                costs -= runningCosts[left]
                left += 1
        return ans</code></pre>
                        
                    </div>
                </section>
            
        </main>
    </div>
    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/bootstrap.bundle.min.js"></script>
    <script src="/static/js/highlight.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const copyButtons = document.querySelectorAll('.copy-btn');
            copyButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    copyCode(this);
                });
            });
            hljs.highlightAll();
        });

        function copyCode(button) {
            const codeBlock = button.previousElementSibling;
            const code = codeBlock.textContent;
            navigator.clipboard.writeText(code).then(function() {
                button.textContent = '已复制';
                setTimeout(function() {
                    button.textContent = '复制代码';
                }, 2000);
            }, function(err) {
                console.error('无法复制代码: ', err);
            });
        }
    </script>
</body>
</html>